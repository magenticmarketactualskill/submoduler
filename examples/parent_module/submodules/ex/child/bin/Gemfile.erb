# Environment configuration for active_data_flow gem linking
GITHUB_URL = 'https://github.com'
LOCAL_GEM_ROOT = ENV.fetch('LOCAL_GEM_ROOT', '../..')

LINK_LOCAL_GEMS = ENV.fetch('LINK_LOCAL_GEMS', 'true') == 'true'
LINK_GITHUB_GEMS = ENV.fetch('LINK_GITHUB_GEMS', 'false') == 'true'

GEM_REPO_URL = 'https://rubygems.org'

def get_remote_link(category:, gem_name:)
  "#{GITHUB_URL}/magenticmarketactualskill/active_dataflow-#{category}-#{gem_name}"
end

def get_local_link(category:)
  category
end

def gem_reference(gem_name:, category:)
  if LINK_LOCAL_GEMS
    gem gem_name, path: get_local_link(category: category)
  elsif LINK_GITHUB_GEMS
    gem gem_name, github: get_remote_link(category: category, gem_name: gem_name)
  else
    gem gem_name
  end
end

source GEM_REPO_URL

# Specify gemspec for this gem
gemspec

# dependency
#gem_reference(gem_name: 'active_data_flow-core-core', category: '../../core/core')

group :development, :test do
  gem 'rspec', '~> 3.12'
  gem 'sqlite3', '~> 1.4'
  gem 'rubocop', '~> 1.50'
  gem 'database_cleaner-active_record', '~> 2.1'
end
